<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RedHaven Advisors</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav id="navbar">
        <a data-target="landing" class="active">Home</a>
        <a data-target="who">Who We Are</a>
        <a data-target="services">Services</a>
        <a data-target="partners">Delivery Partners</a>
        <a data-target="news">News & Articles</a>
    </nav>

    <main>
        <section id="landing" class="page active"></section>
        <section id="who" class="page"></section>
        <section id="services" class="page"></section>
        <section id="partners" class="page"></section>
        <section id="partner-detail" class="page"></section>
        <section id="news" class="page"></section>

        <footer>
            <p>© 2025 RedHaven Advisors. All rights reserved.</p>
        </footer>
    </main>

    <script>
        const nav = document.getElementById('navbar');
        const links = [...nav.querySelectorAll('a')];
        const pages = [...document.querySelectorAll('.page')];

        function showPage(id, addToHistory = true) {
            pages.forEach(p => p.classList.toggle('active', p.id === id));
            links.forEach(a => a.classList.toggle('active', a.dataset.target === id));
            window.scrollTo({ top: 0, behavior: 'auto' });

            if (addToHistory) {
                history.pushState({ page: id }, '', `#${id}`);
            }
        }

        nav.addEventListener('click', e => {
            const a = e.target.closest('a[data-target]');
            if (!a) return;
            e.preventDefault();
            showPage(a.dataset.target);
        });

        window.addEventListener('popstate', e => {
            const page = e.state?.page || 'landing';
            showPage(page, false);
        });

        // Load section HTML files into their containers
        async function loadHTML(id, file) {
            const res = await fetch(file);
            const html = await res.text();
            document.getElementById(id).innerHTML = html;

            // Re-bind special events after load
            if (id === "partners") {
                document.querySelectorAll('#partners .card').forEach(card => {
                    card.addEventListener('click', () => {
                        const name = card.dataset.partnerName;
                        const blurb = card.dataset.partnerBlurb;
                        const desc = card.dataset.partnetDesc;
                        document.getElementById('partner-title').textContent = name;
                        document.getElementById('partner-blurb').innerHTML = `<strong>${name}</strong> — ${blurb}`;
                        document.getElementById('partner-description').textContent = desc;
                        showPage('partner-detail');
                    });
                });
            }
            if (id === "partner-detail") {
                document.getElementById('back-to-partners').addEventListener('click', () => {
                    showPage('partners');
                });
            }
        }

        // Load all partials
        loadHTML('landing', 'landing.html');
        loadHTML('who', 'who.html');
        loadHTML('services', 'services.html');
        loadHTML('partners', 'partners.html');
        loadHTML('partner-detail', 'partner-detail.html');
        loadHTML('news', 'news.html');

        const initialPage = window.location.hash.replace('#', '') || 'landing';
        showPage(initialPage, false);

        window.showPage = showPage;
    </script>
</body>
</html>
